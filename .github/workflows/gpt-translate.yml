# ğŸ¯ AI Translation Automation
# ğŸ“‹ Purpose: Automated translation using GPT for issues and comments
# ğŸš€ Trigger: Issue comments with translation commands
# ğŸ”§ Maintainer: @cubxxw
# ğŸ“ Last Updated: 2024-01-XX

name: ğŸ¤– GPT Translate

on:
  issue_comment:
    types: [created]

jobs:
  gpt-translate:
    name: ğŸŒ AI Translation
    runs-on: ubuntu-latest
    
    # Only run on specific commands and not on bot comments
    if: |
      github.event.issue.pull_request == null &&
      github.actor != 'kubbot' &&
      (contains(github.event.comment.body, '/gpt-translate') || 
       contains(github.event.comment.body, '/gt') ||
       contains(github.event.comment.body, '/chat'))
    
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ¤– Run GPT Translation
        uses: 3ru/gpt-translate@v1.0
        with:
          apikey: ${{ secrets.OPENAI_API_KEY }}
          token: ${{ secrets.BOT_GITHUB_TOKEN }}

      - name: âœ… Translation Complete
        if: success()
        run: |
          echo "âœ… GPT translation completed successfully"
          echo "ğŸ• Processed at: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S %Z')"

      - name: âŒ Handle Translation Failure
        if: failure()
        run: |
          echo "âŒ GPT translation failed"
          echo "ğŸ”‘ Please check OPENAI_API_KEY secret configuration"
          echo "ğŸ• Failed at: $(TZ='Asia/Shanghai' date '+%Y-%m-%d %H:%M:%S %Z')"

# Supported Commands:
# /gpt-translate - Full translation command
# /gt - Short translation command  
# /chat - Interactive chat mode
